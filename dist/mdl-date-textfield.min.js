!function(){"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t});var t=function(t){this.element_=t,this.init()};window.MaterialDateTextfield=t,t.prototype.Constant_={},t.prototype.CssClasses_={LABEL:"mdl-date-textfield__label",INPUT:"mdl-date-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded"},t.prototype.flatMap=function(t,e){for(var s=[],o=0;o<t.length;o++)for(var i=e(t[o]),r=0;r<i.length;r++)s.push(i[r]);return s},t.prototype.range=function(t,e){for(var s=[];t<e;t++)s.push(t);return s},t.prototype.zipWith=function(t,e,s){for(var o=[],i=Math.min(t.length,e.length),r=0;r<i;r++)o.push(s(t[r],e[r]));return o},t.prototype.pattern_=function(){},t.prototype.pattern_.literal=function(e){var s=new t.prototype.pattern_;return s.literal=!0,s.value=e,s},t.prototype.pattern_.sequence=function(e,s){var o=new t.prototype.pattern_;return o.sequence=!0,o.left=e,o.right=s,o},t.prototype.pattern_.choice=function(e){var s=new t.prototype.pattern_;return s.choice=e,s},t.prototype.match_=function(){},t.prototype.match_.continue=function(e){var s=new t.prototype.match_;return s.continue=!0,s.value=e,s},t.prototype.match_.success=function(){var e=new t.prototype.match_;return e.success=!0,e},t.prototype.match_.failure=function(){var e=new t.prototype.match_;return e.failure=!0,e},t.prototype.match_.incomplete=function(){var e=new t.prototype.match_;return e.incomplete=!0,e},t.prototype.run_=function(e,s){if(s.literal)return e===s.value?[t.prototype.match_.success()]:e.startsWith(s.value)?[t.prototype.match_.continue(e.substr(s.value.length))]:s.value.startsWith(e)?[t.prototype.match_.incomplete()]:[t.prototype.match_.failure()];if(s.choice)return t.prototype.flatMap(s.choice,function(s){return t.prototype.run_(e,s)});if(s.sequence)return t.prototype.flatMap(t.prototype.run_(e,s.left),function(e){if(e.failure)return[];if(e.success)return t.prototype.run_("",s.right);if(e.incomplete)return[e];if(e.continue)return t.prototype.run_(e.value,s.right);throw s});throw s},t.prototype.complete_=function(t,e){return this.run_(t,e).some(function(t){return t.success})},t.prototype.partial_=function(t,e){return this.run_(t,e).some(function(t){return t.incomplete})},t.prototype.zeroFill_=function(e){const s=e.toString(),o=(1===s.length?[s,"0"+e]:[s]).map(t.prototype.pattern_.literal);return t.prototype.pattern_.choice(o)},t.prototype.Months=t.prototype.range(1,13).map(t.prototype.zeroFill_),t.prototype.Days=t.prototype.range(1,29).map(t.prototype.zeroFill_),t.prototype.Years=t.prototype.pattern_.choice(t.prototype.range(1900,2101).map(function(e){return t.prototype.pattern_.literal(e.toString())})),t.prototype.Delimiters=t.prototype.pattern_.choice(["-","/",""].map(t.prototype.pattern_.literal)),t.prototype.DaysInAMonth=t.prototype.zipWith(t.prototype.Months,[31,28,31,30,31,30,31,31,30,31,30,31],function(t,e){return{month:t,days:e}}),t.prototype.AdditionalDays=t.prototype.pattern_.choice(t.prototype.flatMap(t.prototype.DaysInAMonth,function(e){return t.prototype.range(29,e.days+1).map(function(s){return[e.month,t.prototype.Delimiters,t.prototype.pattern_.literal(s.toString())].reduce(t.prototype.pattern_.sequence)})})),t.prototype.isLeapYear=function(t){return t%4===0&&(t%100!==0||t%400===0)},t.prototype.LeapDays=t.prototype.pattern_.choice(t.prototype.range(1900,2101).filter(t.prototype.isLeapYear).map(function(e){return[t.prototype.zeroFill_(2),t.prototype.Delimiters,t.prototype.pattern_.literal("29"),t.prototype.Delimiters,t.prototype.pattern_.literal(e.toString())].reduce(t.prototype.pattern_.sequence)})),t.prototype.DatePattern=t.prototype.pattern_.choice([[t.prototype.pattern_.choice(t.prototype.Months),t.prototype.Delimiters,t.prototype.pattern_.choice(t.prototype.Days),t.prototype.Delimiters,t.prototype.Years].reduce(t.prototype.pattern_.sequence),[t.prototype.AdditionalDays,t.prototype.Delimiters,t.prototype.Years].reduce(t.prototype.pattern_.sequence),t.prototype.LeapDays]),t.prototype.onFocus_=function(t){for(this.element_.classList.add(this.CssClasses_.IS_FOCUSED);this.input_.value.indexOf("/")!==-1;)this.input_.value=this.input_.value.replace("/","")},t.prototype.onInput_=function(t){console.log("partial",this.partial_(this.input_.value,this.DatePattern),"complete",this.complete_(this.input_.value,this.DatePattern)),this.updateClasses_()},t.prototype.onBlur_=function(t){if(this.element_.classList.remove(this.CssClasses_.IS_FOCUSED),this.updateClasses_(),!this.element_.classList.contains(this.CssClasses_.IS_INVALID)&&this.element_.classList.contains(this.CssClasses_.IS_DIRTY))if(this.complete_(this.input_.value,this.DatePattern)){var e=/^(\d{1,2})\/?-?(\d{1,2})\/?-?(\d{4})/,s=e.exec(this.input_.value);parseInt(s[2],10),parseInt(s[1],10),parseInt(s[3],10);s[1].length<2&&(s[1]="0"+s[1]),s[2].length<2&&(s[2]="0"+s[2]),this.input_.value=s[1]+"/"+s[2]+"/"+s[3]}else this.element_.classList.add(this.CssClasses_.IS_INVALID)},t.prototype.onReset_=function(t){this.updateClasses_()},t.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},t.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},t.prototype.checkDisabled=t.prototype.checkDisabled,t.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.checkFocus=t.prototype.checkFocus,t.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid&&(this.partial_(this.input_.value,this.DatePattern)||this.complete_(this.input_.value,this.DatePattern))?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},t.prototype.checkValidity=t.prototype.checkValidity,t.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},t.prototype.checkDirty=t.prototype.checkDirty,t.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},t.prototype.enable=t.prototype.enable,t.prototype.change=function(t){this.input_.value=t||"",this.updateClasses_()},t.prototype.change=t.prototype.change,t.prototype.init=function(){this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_&&(this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundInputHandler=this.onInput_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundInputHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.onInput_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus()),this.element_.classList.contains(this.CssClasses_.IS_DIRTY)&&this.onBlur_()))},componentHandler.register({constructor:t,classAsString:"MaterialDateTextfield",cssClass:"mdl-js-date-textfield",widget:!0})}();
//# sourceMappingURL=mdl-date-textfield.min.js.map